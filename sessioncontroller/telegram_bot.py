# -*- coding: utf-8 -*-import telegramfrom settings import TELEGRAM_TOKENfrom pygeocoder import Geocoderimport pygeolibfrom model import subscribe, unsubscribefrom utils import lat_lon_to_cellbot = telegram.Bot(token=TELEGRAM_TOKEN)commands = [    '/subscribe Санкт-Петербург',    '/unsubscribe']def geo_code(address):    try:        business_geocoder = Geocoder(None, 'MY_API_KEY')        results = business_geocoder.geocode(address)        return results.latitude, results.longitude    except pygeolib.GeocoderError:        return Nonedef reply(update, message):    bot.sendMessage(        chat_id=update.message.chat_id,        reply_to_message_id=update.message.message_id,        text=message,    )def reply_by_chat_id(chat_id, message):    bot.sendMessage(        chat_id=chat_id,        text=message,    )def main():    offset = 0    print 'Press Ctrl+C to kill...'    while True:        updates = bot.getUpdates(offset=offset+1)        for update in updates:            text = update.message.text            text_split = text.split(' ', 1)            command, arguments = text_split[0], None            if len(text_split) > 1:                arguments = text_split[1]            elif command == '/unsubscribe':                unsubscribe(update.message.chat_id)                reply(update, "Вы успешно отписаны.")            else:                reply(update, "Неизвестная комманда")            offset = update.update_id